#pragma checksum "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "d3d68a34173f14a24f510172cae980f65fdf7a2c"
// <auto-generated/>
#pragma warning disable 1591
namespace SaikPOS.Pages.Inventory.PosInvoice
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using System.IO;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using SaikPOS;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using SaikPOS.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using SaikPOS.Data.Setting;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using SaikPOS.Data.Transaction;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using SaikPOS.Data.ViewModel;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using SaikPOS.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using SaikPOS.Services;

#line default
#line hidden
#nullable disable
#nullable restore
#line 17 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using SaikPOS.Services.Interface;

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using SaikPOS.Services.Repository;

#line default
#line hidden
#nullable disable
#nullable restore
#line 19 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using SaikPOS.PdfReport;

#line default
#line hidden
#nullable disable
#nullable restore
#line 20 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using MudBlazor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 21 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using Blazored.LocalStorage;

#line default
#line hidden
#nullable disable
#nullable restore
#line 22 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using Blazored.Typeahead;

#line default
#line hidden
#nullable disable
#nullable restore
#line 23 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using SaikPOS.Services.CartService;

#line default
#line hidden
#nullable disable
#nullable restore
#line 24 "E:\Personal Projects\SaikPOS\SaikPOS\_Imports.razor"
using Microsoft.Extensions.Localization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
using Microsoft.Data.SqlClient;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
using Dapper;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
using System.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 22 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
using Radzen;

#line default
#line hidden
#nullable disable
#nullable restore
#line 23 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
           [Authorize]

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Components.LayoutAttribute(typeof(PosLayout))]
    [global::Microsoft.AspNetCore.Components.RouteAttribute("/sales/pos")]
    public partial class PosInvoice : global::Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.AddMarkupContent(0, "<link rel=\"stylesheet\" href=\"css/Posinvoice.css\">\r\n");
            __builder.OpenElement(1, "div");
            __builder.AddAttribute(2, "class", "pl-3 pr-3");
            __builder.AddAttribute(3, "style", "margin-top:12px;");
            __builder.AddMarkupContent(4, "<div class=\"top-bar\"><ul class=\"nav nav-tabs\" role=\"tablist\"><li class=\"active\"><a href=\"/\" role=\"tab\" data-toggle=\"tab\" class=\"home\" id=\"new_sale\">\r\n        Dashboard </a></li></ul></div>\r\n");
            __builder.OpenElement(5, "div");
            __builder.AddAttribute(6, "class", "tab-content");
            __builder.OpenElement(7, "div");
            __builder.AddAttribute(8, "class", "tab-pane fade active in");
            __builder.AddAttribute(9, "id", "home");
            __builder.OpenElement(10, "div");
            __builder.AddAttribute(11, "class", "row");
            __builder.OpenElement(12, "div");
            __builder.AddAttribute(13, "class", "col-sm-12 col-md-6");
            __builder.OpenElement(14, "div");
            __builder.AddAttribute(15, "class", "row");
            __builder.OpenElement(16, "div");
            __builder.AddAttribute(17, "class", "col-xs-4 col-sm-3 col-md-4 col-lg-3 col-xl-2");
            __builder.OpenElement(18, "div");
            __builder.AddAttribute(19, "class", "btn-check-group");
#nullable restore
#line 42 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                  foreach(var item in listCategory)
                 {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(20, "div");
            __builder.AddAttribute(21, "class", "btn-check");
            __builder.AddMarkupContent(22, "<input type=\"checkbox\" checked autocomplete=\"off\" id=\"all\" onclick=\"check_category(\'all\')\">\r\n                              ");
            __builder.OpenElement(23, "label");
            __builder.AddAttribute(24, "class", "btn btn-success btn-block");
            __builder.AddAttribute(25, "for", "all");
            __builder.OpenElement(26, "a");
            __builder.AddAttribute(27, "style", "cursor:pointer;");
            __builder.AddAttribute(28, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 47 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                                     () =>CategoryClicked(item.CategoryId)

#line default
#line hidden
#nullable disable
            ));
#nullable restore
#line 47 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
__builder.AddContent(29, item.CategoryName);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 50 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                 }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(30, "\r\n    ");
            __builder.OpenElement(31, "div");
            __builder.AddAttribute(32, "class", "col-xs-8 col-sm-9 col-md-8 col-lg-9 col-xl-10 ");
            __builder.AddAttribute(33, "id", "style-3");
            __builder.OpenElement(34, "div");
            __builder.AddAttribute(35, "class", "row search-bar");
            __builder.OpenElement(36, "div");
            __builder.AddAttribute(37, "class", "col-sm-6");
            __builder.OpenElement(38, "div");
            __builder.AddAttribute(39, "class", "form-group has-feedback has-search");
            __builder.OpenComponent<global::Radzen.Blazor.RadzenAutoComplete>(40);
            __builder.AddAttribute(41, "Data", (object)(global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Collections.IEnumerable>(
#nullable restore
#line 61 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                            listProduct

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(42, "TextProperty", (object)("ProductName"));
            __builder.AddAttribute(43, "Change", (object)(global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::Microsoft.AspNetCore.Components.EventCallback<global::System.Object>>(global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::System.Object>(this, 
#nullable restore
#line 61 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                                                            args => OnChange(args, "AutoComplete")

#line default
#line hidden
#nullable disable
            ))));
            __builder.AddAttribute(44, "style", (object)("width: 100%; height:30px; font-size:14px;"));
            __builder.AddAttribute(45, "placeholder", (object)("Scan/Search Product by name"));
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(46, "\r\n   ");
            __builder.OpenElement(47, "div");
            __builder.AddAttribute(48, "class", "product-grid ps ps--active-x ps--active-y");
            __builder.OpenElement(49, "div");
            __builder.AddAttribute(50, "class", "row row-m-3");
            __builder.AddAttribute(51, "id", "product_search");
#nullable restore
#line 68 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
         foreach(var item in listProduct)
        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(52, "div");
            __builder.AddAttribute(53, "class", "col-xs-4 col-sm-3 col-md-4 col-lg-3 col-p-3");
            __builder.OpenElement(54, "div");
            __builder.AddAttribute(55, "class", "product-panel overflow-hidden border-0 shadow-sm");
            __builder.OpenElement(56, "div");
            __builder.AddAttribute(57, "class", "item-image position-relative overflow-hidden");
#nullable restore
#line 73 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
 if(item.LogoPath == string.Empty)
                                {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(58, "<img src=\"img/customer.png\" class=\"img-responsive\">");
#nullable restore
#line 76 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                }
								else
								{

#line default
#line hidden
#nullable disable
            __builder.OpenElement(59, "img");
            __builder.AddAttribute(60, "src", 
#nullable restore
#line 79 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                                   item.LogoPath

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(61, "class", "img-responsive");
            __builder.AddAttribute(62, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 79 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                                                                                   () =>ProductClicked(item.ProductId)

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseElement();
#nullable restore
#line 80 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
								}

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(63, "\r\n            ");
            __builder.OpenElement(64, "div");
            __builder.AddAttribute(65, "class", "panel-footer border-0 bg-white");
            __builder.OpenElement(66, "h3");
            __builder.AddAttribute(67, "class", "item-details-title");
#nullable restore
#line 83 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
__builder.AddContent(68, item.ProductName);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 87 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
        }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(69, "\r\n");
            __builder.OpenElement(70, "div");
            __builder.AddAttribute(71, "class", "col-sm-12 col-md-6");
            __builder.OpenElement(72, "div");
            __builder.AddAttribute(73, "class", "d-flex align-items-center mb-5");
            __builder.OpenElement(74, "div");
            __builder.AddAttribute(75, "class", "input-group mr-3");
            __builder.OpenElement(76, "select");
            __builder.AddAttribute(77, "class", "form-control");
            __builder.AddAttribute(78, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 101 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                               () =>LedgerClicked()

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(79, "value", global::Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 101 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                    master.LedgerId

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(80, "onchange", global::Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => master.LedgerId = __value, master.LedgerId));
            __builder.SetUpdatesAttributeName("value");
            __builder.OpenElement(81, "option");
            __builder.AddAttribute(82, "value", "0");
            __builder.AddContent(83, "Choose Customer");
            __builder.CloseElement();
#nullable restore
#line 103 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
     foreach(var item in subledger)
    {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(84, "option");
            __builder.AddAttribute(85, "value", 
#nullable restore
#line 105 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                  item.LedgerId

#line default
#line hidden
#nullable disable
            );
#nullable restore
#line 105 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
__builder.AddContent(86, item.LedgerName);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
#nullable restore
#line 106 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(87, "\r\n\r\n");
            __builder.OpenElement(88, "div");
            __builder.AddAttribute(89, "class", "d-flex align-items-center");
            __builder.AddMarkupContent(90, "<label class=\"mr-2 mb-0\">Invoice No - <i class=\"text-danger\"></i></label>\r\n");
            __builder.OpenElement(91, "div");
            __builder.AddAttribute(92, "class", "invoice-no");
            __builder.AddAttribute(93, "id", "gui_invoice_no");
            __builder.OpenElement(94, "input");
            __builder.AddAttribute(95, "type", "text");
            __builder.AddAttribute(96, "class", "form-control");
            __builder.AddAttribute(97, "readonly");
            __builder.AddAttribute(98, "value", global::Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 113 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                               master.VoucherNo

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(99, "onchange", global::Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => master.VoucherNo = __value, master.VoucherNo));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(100, "\r\n\r\n");
            __builder.OpenElement(101, "div");
            __builder.AddAttribute(102, "class", "table-responsive guiproductdata");
            __builder.OpenElement(103, "table");
            __builder.AddAttribute(104, "class", "table table-bordered table-hover table-sm nowrap gui-products-table");
            __builder.AddAttribute(105, "id", "addinvoice");
            __builder.AddMarkupContent(106, @"<thead><tr><th scope=""col"">Product</th>
                                                                            <th scope=""col"">Stock</th>
                                                                            <th scope=""col"">Qty</th>
                                                                            <th scope=""col"">Unit</th> 
                                                                            <th scope=""col"">Rate</th>
                                                                            <th scope=""col"">Discount</th> 
                                                                            <th scope=""col"">Subtotal</th> 
                                                                            <th scope=""col"" class=""text-center""><i class=""fa fa-trash""></i></th></tr></thead> 
                                                                            ");
            __builder.OpenElement(107, "tbody");
#nullable restore
#line 133 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
  
                                int sno = 0;
                            

#line default
#line hidden
#nullable disable
#nullable restore
#line 136 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                             if (cartItems != null && cartItems.Count > 0)
                            {
                                

#line default
#line hidden
#nullable disable
#nullable restore
#line 138 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                 foreach (var td in cartItems)
                                        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(108, "tr");
            __builder.AddAttribute(109, "role", "row");
            __builder.OpenElement(110, "td");
            __builder.AddAttribute(111, "class", " align-middle");
            __builder.OpenElement(112, "span");
            __builder.AddAttribute(113, "class");
#nullable restore
#line 142 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
__builder.AddContent(114, td.ProductName);

#line default
#line hidden
#nullable disable
            __builder.AddContent(115, "  (");
#nullable restore
#line 142 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
__builder.AddContent(116, td.ProductCode);

#line default
#line hidden
#nullable disable
            __builder.AddContent(117, ")");
            __builder.CloseElement();
            __builder.AddMarkupContent(118, "\r\n                                                \r\n                                                ");
            __builder.OpenElement(119, "button");
            __builder.AddAttribute(120, "type", "button");
            __builder.AddAttribute(121, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 144 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                                                ()=>ShowModel(td.ProductId)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(122, "class", "btn btn-rounded");
            __builder.AddAttribute(123, "data-toggle", "modal");
            __builder.AddAttribute(124, "data-target", "#verifyModalContent2");
            __builder.AddAttribute(125, "data-whatever", "");
            __builder.AddMarkupContent(126, "<i class=\"fa fa-eye\"></i>");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(127, "\r\n                                        ");
            __builder.OpenElement(128, "td");
            __builder.AddAttribute(129, "class", " align-middle");
#nullable restore
#line 146 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
__builder.AddContent(130, td.CurrentStock);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(131, "\r\n                                        ");
            __builder.OpenElement(132, "td");
            __builder.AddAttribute(133, "class", " align-middle");
            __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.EditForm>(134);
            __builder.AddAttribute(135, "Model", (object)(global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Object>(
#nullable restore
#line 148 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                             td

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(136, "ChildContent", (global::Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Forms.EditContext>)((context) => (__builder2) => {
                __builder2.OpenElement(137, "td");
                __builder2.AddAttribute(138, "scope", "row");
                __builder2.OpenElement(139, "a");
                __builder2.AddAttribute(140, "class", "btn btn-danger btn-sm btnrightalign");
                __builder2.AddAttribute(141, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 152 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                                                                     () => AddToCartAsc(td)

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddMarkupContent(142, "<i class=\"fa fa-minus\" aria-hidden=\"true\"></i>");
                __builder2.CloseElement();
                __builder2.AddMarkupContent(143, "\r\n                                             ");
                __builder2.OpenElement(144, "span");
                __builder2.AddAttribute(145, "id", "productionsetting-2-2");
                __builder2.OpenElement(146, "input");
                __builder2.AddAttribute(147, "type", "number");
                __builder2.AddAttribute(148, "id", "quantity");
                __builder2.AddAttribute(149, "style", "width: 40px");
                __builder2.AddAttribute(150, "readonly");
                __builder2.AddAttribute(151, "value", global::Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 153 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                                                                                         td.Qty

#line default
#line hidden
#nullable disable
                , culture: global::System.Globalization.CultureInfo.InvariantCulture));
                __builder2.AddAttribute(152, "onchange", global::Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => td.Qty = __value, td.Qty, culture: global::System.Globalization.CultureInfo.InvariantCulture));
                __builder2.SetUpdatesAttributeName("value");
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.AddMarkupContent(153, "\r\n                                        ");
                __builder2.OpenElement(154, "a");
                __builder2.AddAttribute(155, "class", "btn btn-info btn-sm btnleftalign");
                __builder2.AddAttribute(156, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 154 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                                                              () => AddToCartDsc(td)

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddMarkupContent(157, "<i class=\"fa fa-plus\" aria-hidden=\"true\"></i>");
                __builder2.CloseElement();
                __builder2.CloseElement();
            }
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.AddMarkupContent(158, "\r\n                                        ");
            __builder.OpenElement(159, "td");
            __builder.AddAttribute(160, "class", " align-middle");
#nullable restore
#line 159 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
__builder.AddContent(161, td.UnitName);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(162, "\r\n                                        ");
            __builder.OpenElement(163, "td");
            __builder.AddAttribute(164, "class", " align-middle");
#nullable restore
#line 160 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
__builder.AddContent(165, td.SalesRate);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(166, "\r\n                                        ");
            __builder.OpenElement(167, "td");
            __builder.AddAttribute(168, "class", " align-middle");
#nullable restore
#line 161 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
__builder.AddContent(169, td.DiscountAmount);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(170, "\r\n                                        ");
            __builder.OpenElement(171, "td");
            __builder.AddAttribute(172, "class", " align-middle");
#nullable restore
#line 163 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
__builder.AddContent(173, td.TotalAmount);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(174, "\r\n                                        ");
            __builder.OpenElement(175, "td");
            __builder.OpenElement(176, "a");
            __builder.AddAttribute(177, "class", "btn btn-danger btn-sm btnrightalign");
            __builder.AddAttribute(178, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 166 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                                                                     (() => DeleteItem(td))

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(179, "<i class=\"fa fa-trash-o\" aria-hidden=\"true\"></i>");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 169 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                }

#line default
#line hidden
#nullable disable
#nullable restore
#line 169 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                 
                            }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(180, "\r\n");
            __builder.OpenElement(181, "div");
            __builder.AddAttribute(182, "class", "footer");
            __builder.OpenElement(183, "div");
            __builder.AddAttribute(184, "class", "form-group row guifooterpanel");
            __builder.OpenElement(185, "div");
            __builder.AddAttribute(186, "class", "col-sm-12");
            __builder.AddMarkupContent(187, "<label for=\"date\" class=\"col-sm-6 col-lg-6 col-xl-7 col-form-label\">Total:</label>\r\n");
            __builder.OpenElement(188, "div");
            __builder.AddAttribute(189, "class", "col-sm-6 col-lg-5 col-xl-4");
            __builder.OpenElement(190, "input");
            __builder.AddAttribute(191, "type", "text");
            __builder.AddAttribute(192, "class", "form-control");
            __builder.AddAttribute(193, "value", global::Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 179 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                               master.TotalAmount

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(194, "onchange", global::Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => master.TotalAmount = __value, master.TotalAmount));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(195, "\r\n");
            __builder.OpenElement(196, "div");
            __builder.AddAttribute(197, "class", "form-group row guifooterpanel");
            __builder.OpenElement(198, "div");
            __builder.AddAttribute(199, "class", "col-sm-12");
            __builder.AddMarkupContent(200, "<label for=\"date\" class=\"col-sm-6 col-lg-6 col-xl-7 col-form-label\">Bill Discount:</label>\r\n");
            __builder.OpenElement(201, "div");
            __builder.AddAttribute(202, "class", "col-sm-6 col-lg-5 col-xl-4");
            __builder.OpenElement(203, "input");
            __builder.AddAttribute(204, "type", "text");
            __builder.AddAttribute(205, "class", "form-control gui-foot text-right");
            __builder.AddAttribute(206, "onkeyup", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.KeyboardEventArgs>(this, 
#nullable restore
#line 187 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                                                                       CalculateTotal

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(207, "autocomplete", "off");
            __builder.AddAttribute(208, "value", global::Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 187 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                                       master.BillDiscount

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(209, "oninput", global::Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => master.BillDiscount = __value, master.BillDiscount));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(210, "\r\n");
            __builder.OpenElement(211, "div");
            __builder.AddAttribute(212, "class", "form-group row hiddenRow guifooterpanel collapse in");
            __builder.AddAttribute(213, "id", "taxdetails");
            __builder.AddAttribute(214, "aria-expanded", "true");
            __builder.AddAttribute(215, "style");
            __builder.OpenElement(216, "div");
            __builder.AddAttribute(217, "class", "col-sm-12");
            __builder.AddMarkupContent(218, "<label for=\"date\" class=\"ol-sm-6 col-lg-6 col-xl-7 col-form-label\">VAT:</label>\r\n");
            __builder.OpenElement(219, "div");
            __builder.AddAttribute(220, "class", "col-sm-6 col-lg-5 col-xl-4");
            __builder.OpenElement(221, "input");
            __builder.AddAttribute(222, "id", "total_tax_ammount0");
            __builder.AddAttribute(223, "tabindex", "-1");
            __builder.AddAttribute(224, "class", "form-control gui-foot text-right valid totalTax");
            __builder.AddAttribute(225, "onkeyup", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.KeyboardEventArgs>(this, 
#nullable restore
#line 194 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                                                                                                        CalculateTotal

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(226, "autocomplete", "off");
            __builder.AddAttribute(227, "type", "text");
            __builder.AddAttribute(228, "value", global::Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 194 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                                                                             master.TaxRate

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(229, "oninput", global::Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => master.TaxRate = __value, master.TaxRate));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(230, "\r\n");
            __builder.OpenElement(231, "div");
            __builder.AddAttribute(232, "class", "form-group row guifooterpanel");
            __builder.OpenElement(233, "div");
            __builder.AddAttribute(234, "class", "col-sm-12");
            __builder.AddMarkupContent(235, "<label for=\"date\" class=\"col-sm-6 col-lg-6 col-xl-7 col-form-label\">Grand Total:</label>\r\n");
            __builder.OpenElement(236, "div");
            __builder.AddAttribute(237, "class", "col-sm-6 col-lg-5 col-xl-4");
            __builder.OpenElement(238, "input");
            __builder.AddAttribute(239, "type", "text");
            __builder.AddAttribute(240, "class", "form-control gui-foot text-right");
            __builder.AddAttribute(241, "onkeyup", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.KeyboardEventArgs>(this, 
#nullable restore
#line 202 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                                                                    CalculateTotal

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(242, "autocomplete", "off");
            __builder.AddAttribute(243, "readonly", "readonly");
            __builder.AddAttribute(244, "value", global::Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 202 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                                      master.GrandTotal

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(245, "oninput", global::Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => master.GrandTotal = __value, master.GrandTotal));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(246, "\r\n\r\n");
            __builder.OpenElement(247, "div");
            __builder.AddAttribute(248, "class", "form-group row guifooterpanel");
            __builder.OpenElement(249, "div");
            __builder.AddAttribute(250, "class", "col-sm-12");
            __builder.AddMarkupContent(251, "<label for=\"date\" class=\"col-sm-6 col-lg-6 col-xl-7 col-form-label\">Previous:</label>\r\n");
            __builder.OpenElement(252, "div");
            __builder.AddAttribute(253, "class", "col-sm-6 col-lg-5 col-xl-4");
            __builder.OpenElement(254, "input");
            __builder.AddAttribute(255, "type", "text");
            __builder.AddAttribute(256, "class", "form-control gui-foot text-right");
            __builder.AddAttribute(257, "readonly", "readonly");
            __builder.AddAttribute(258, "value", global::Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 210 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                                                                           master.PreviousDue

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(259, "onchange", global::Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => master.PreviousDue = __value, master.PreviousDue));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(260, "\r\n\r\n");
            __builder.OpenElement(261, "div");
            __builder.AddAttribute(262, "class", "fixedclasspos");
            __builder.OpenElement(263, "div");
            __builder.AddAttribute(264, "class", "bottomarea");
            __builder.OpenElement(265, "div");
            __builder.AddAttribute(266, "class", "row");
            __builder.OpenElement(267, "div");
            __builder.AddAttribute(268, "class", "col-lg-8 col-xl-8");
            __builder.OpenElement(269, "div");
            __builder.AddAttribute(270, "class", "calculation d-lg-flex");
            __builder.OpenElement(271, "div");
            __builder.AddAttribute(272, "class", "cal-box d-lg-flex align-items-lg-center mr-4");
            __builder.AddMarkupContent(273, "<label class=\"cal-label mr-2 mb-0\">Net Total:</label>");
            __builder.OpenElement(274, "span");
            __builder.AddAttribute(275, "class", "amount");
            __builder.AddAttribute(276, "id", "net_total_text");
#nullable restore
#line 222 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
__builder.AddContent(277, master.NetAmounts);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(278, "\r\n");
            __builder.OpenElement(279, "div");
            __builder.AddAttribute(280, "class", "cal-box d-lg-flex align-items-lg-center mr-4");
            __builder.OpenElement(281, "div");
            __builder.AddAttribute(282, "class", "form-inline d-inline-flex align-items-center");
            __builder.AddMarkupContent(283, "<label class=\"cal-label mr-2 mb-0\">Grand Amount:</label>\r\n");
#nullable restore
#line 228 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
__builder.AddContent(284, master.GrandTotal);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(285, "\r\n");
            __builder.OpenElement(286, "div");
            __builder.AddAttribute(287, "class", "cal-box d-lg-flex align-items-lg-center mr-4");
            __builder.AddMarkupContent(288, "<label class=\"cal-label mr-2 mb-0\">Previous Due:</label>");
            __builder.OpenElement(289, "span");
            __builder.AddAttribute(290, "class", "amount");
            __builder.AddAttribute(291, "id", "due_text");
#nullable restore
#line 232 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
__builder.AddContent(292, master.PreviousDue);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(293, "\r\n");
            __builder.OpenElement(294, "div");
            __builder.AddAttribute(295, "class", "col-lg-4 col-xl-4 text-xl-right");
            __builder.OpenElement(296, "div");
            __builder.AddAttribute(297, "class", "action-btns d-flex justify-content-end");
            __builder.OpenElement(298, "button");
            __builder.AddAttribute(299, "type", "button");
            __builder.AddAttribute(300, "class", "btn btn-success btn-lg mr-2");
            __builder.AddAttribute(301, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 238 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                                    (() => Save())

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(302, "Save");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(303, "\r\n");
            __builder.OpenElement(304, "div");
            __builder.AddAttribute(305, "class", "tab-pane fade");
            __builder.AddAttribute(306, "id", "saleList");
            __builder.OpenElement(307, "div");
            __builder.AddAttribute(308, "class", "panel panel-default");
            __builder.OpenElement(309, "div");
            __builder.AddAttribute(310, "class", "panel-body");
            __builder.OpenElement(311, "div");
            __builder.AddAttribute(312, "class", "table-responsive padding10");
            __builder.AddAttribute(313, "id", "invoic_list");
            __builder.OpenElement(314, "div");
            __builder.AddAttribute(315, "id", "gui_productinfo_wrapper");
            __builder.AddAttribute(316, "class", "dataTables_wrapper form-inline dt-bootstrap no-footer");
            __builder.OpenElement(317, "div");
            __builder.AddAttribute(318, "class", "row");
            __builder.OpenElement(319, "div");
            __builder.AddAttribute(320, "class", "col-sm-4");
            __builder.OpenElement(321, "div");
            __builder.AddAttribute(322, "class", "dataTables_length");
            __builder.AddAttribute(323, "id", "gui_productinfo_length");
            __builder.OpenElement(324, "label");
            __builder.AddContent(325, "Show ");
            __builder.OpenElement(326, "select");
            __builder.AddAttribute(327, "name", "gui_productinfo_length");
            __builder.AddAttribute(328, "aria-controls", "gui_productinfo");
            __builder.AddAttribute(329, "class", "form-control input-sm select2-hidden-accessible");
            __builder.AddAttribute(330, "tabindex", "-1");
            __builder.AddAttribute(331, "aria-hidden", "true");
            __builder.OpenElement(332, "option");
            __builder.AddAttribute(333, "value", "10");
            __builder.AddContent(334, "10");
            __builder.CloseElement();
            __builder.OpenElement(335, "option");
            __builder.AddAttribute(336, "value", "25");
            __builder.AddContent(337, "25");
            __builder.CloseElement();
            __builder.OpenElement(338, "option");
            __builder.AddAttribute(339, "value", "50");
            __builder.AddContent(340, "50");
            __builder.CloseElement();
            __builder.OpenElement(341, "option");
            __builder.AddAttribute(342, "value", "-1");
            __builder.AddContent(343, "All");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(344, @"<span class=""select2 select2-container select2-container--default"" dir=""ltr"" style=""width: 75px;""><span class=""selection""><span class=""select2-selection select2-selection--single"" role=""combobox"" aria-haspopup=""true"" aria-expanded=""false"" tabindex=""0"" aria-labelledby=""select2-gui_productinfo_length-4o-container""><span class=""select2-selection__rendered"" id=""select2-gui_productinfo_length-4o-container"" title=""10""><span class=""select2-selection__clear"">×</span>10</span><span class=""select2-selection__arrow"" role=""presentation""><b role=""presentation""></b></span></span></span><span class=""dropdown-wrapper"" aria-hidden=""true""></span></span> entries");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(345, @"<div class=""col-sm-4 text-center""><div class=""dt-buttons btn-group""><a class=""btn btn-default buttons-copy buttons-html5 btn-sm prints"" tabindex=""0"" aria-controls=""gui_productinfo""><span>Copy</span></a><a class=""btn btn-default buttons-csv buttons-html5 btn-sm prints"" tabindex=""0"" aria-controls=""gui_productinfo""><span>CSV</span></a><a class=""btn btn-default buttons-excel buttons-html5 btn-sm prints"" tabindex=""0"" aria-controls=""gui_productinfo""><span>Excel</span></a><a class=""btn btn-default buttons-pdf buttons-html5 btn-sm prints"" tabindex=""0"" aria-controls=""gui_productinfo""><span>PDF</span></a><a class=""btn btn-default buttons-print btn-sm prints"" tabindex=""0"" aria-controls=""gui_productinfo""><span>Print</span></a></div></div>");
            __builder.AddMarkupContent(346, "<div class=\"col-sm-4\"><div id=\"gui_productinfo_filter\" class=\"dataTables_filter\"><label>Search:<input type=\"search\" class=\"form-control input-sm\" placeholder aria-controls=\"gui_productinfo\"></label></div></div>");
            __builder.CloseElement();
            __builder.AddMarkupContent(347, "<table id=\"gui_productinfo\" class=\"table table-bordered table-hover datatable dataTable no-footer dtr-inline\" role=\"grid\"><thead><tr role=\"row\"><th class=\"sorting_asc\" tabindex=\"0\" aria-controls=\"gui_productinfo\" rowspan=\"1\" colspan=\"1\" aria-sort=\"ascending\" aria-label=\"SL.: activate to sort column descending\" style=\"width: 0px;\">SL.</th><th class=\"sorting\" tabindex=\"0\" aria-controls=\"gui_productinfo\" rowspan=\"1\" colspan=\"1\" aria-label=\"Invoice No: activate to sort column ascending\" style=\"width: 0px;\">Invoice No</th><th class=\"sorting\" tabindex=\"0\" aria-controls=\"gui_productinfo\" rowspan=\"1\" colspan=\"1\" aria-label=\"Invoice ID: activate to sort column ascending\" style=\"width: 0px;\">Invoice ID</th><th class=\"sorting\" tabindex=\"0\" aria-controls=\"gui_productinfo\" rowspan=\"1\" colspan=\"1\" aria-label=\"Customer Name: activate to sort column ascending\" style=\"width: 0px;\">Customer Name</th><th class=\"sorting\" tabindex=\"0\" aria-controls=\"gui_productinfo\" rowspan=\"1\" colspan=\"1\" aria-label=\"Date: activate to sort column ascending\" style=\"width: 0px;\">Date</th><th class=\"sorting\" tabindex=\"0\" aria-controls=\"gui_productinfo\" rowspan=\"1\" colspan=\"1\" aria-label=\"Total Amount: activate to sort column ascending\" style=\"width: 0px;\">Total Amount</th><th class=\"sorting\" tabindex=\"0\" aria-controls=\"gui_productinfo\" rowspan=\"1\" colspan=\"1\" aria-label=\"Action: activate to sort column ascending\" style=\"width: 0px;\">Action</th></tr></thead>\r\n                                <tbody id=\"gui_tbody\"><tr class=\"odd\"><td valign=\"top\" colspan=\"7\" class=\"dataTables_empty\">No data available in table</td></tr></tbody></table>");
            __builder.AddMarkupContent(348, @"<div class=""dataTables_paginate paging_simple_numbers"" id=""gui_productinfo_paginate""><ul class=""pagination""><li class=""paginate_button previous disabled"" id=""gui_productinfo_previous""><a href=""#"" aria-controls=""gui_productinfo"" data-dt-idx=""0"" tabindex=""0"">Previous</a></li><li class=""paginate_button next disabled"" id=""gui_productinfo_next""><a href=""#"" aria-controls=""gui_productinfo"" data-dt-idx=""1"" tabindex=""0"">Next</a></li></ul></div>");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 274 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
 if (isShow == true)
{

#line default
#line hidden
#nullable disable
            __builder.OpenElement(349, "div");
            __builder.AddAttribute(350, "class", "modal fade modal-success in");
            __builder.AddAttribute(351, "id", "myModal");
            __builder.AddAttribute(352, "style", "display:block");
            __builder.AddAttribute(353, "aria-modal", "true");
            __builder.AddAttribute(354, "role", "dialog");
            __builder.OpenElement(355, "div");
            __builder.AddAttribute(356, "class", "modal-dialog");
            __builder.OpenElement(357, "div");
            __builder.AddAttribute(358, "class", "modal-content");
            __builder.OpenElement(359, "div");
            __builder.AddAttribute(360, "class", "modal-header");
            __builder.OpenElement(361, "h3");
            __builder.AddAttribute(362, "class", "modal-title");
            __builder.AddAttribute(363, "style", "float:left; margin-top: 14px;margin-left:10px;");
#nullable restore
#line 281 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
__builder.AddContent(364, productDetails.ProductName);

#line default
#line hidden
#nullable disable
            __builder.AddContent(365, " , (");
#nullable restore
#line 281 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
__builder.AddContent(366, productDetails.ProductCode);

#line default
#line hidden
#nullable disable
            __builder.AddContent(367, ")");
            __builder.CloseElement();
            __builder.AddMarkupContent(368, "\r\n                    ");
            __builder.OpenElement(369, "button");
            __builder.AddAttribute(370, "class", "close");
            __builder.AddAttribute(371, "type", "button");
            __builder.AddAttribute(372, "style", "margin:0px 0px 0px 0px;");
            __builder.AddAttribute(373, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 282 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                                                                  CloseModel

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(374, "<span aria-hidden=\"true\">×</span>");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(375, "\r\n                ");
            __builder.OpenElement(376, "div");
            __builder.AddAttribute(377, "class", "modal-body");
            __builder.OpenElement(378, "div");
            __builder.AddAttribute(379, "class", "form-group");
            __builder.AddMarkupContent(380, "<label class=\"col-form-label\" for=\"recipient-name-1\">Rate:</label>\r\n                            ");
            __builder.OpenElement(381, "input");
            __builder.AddAttribute(382, "class", "form-control");
            __builder.AddAttribute(383, "type", "text");
            __builder.AddAttribute(384, "value", global::Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 287 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                               productDetails.SalesRate

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(385, "onchange", global::Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => productDetails.SalesRate = __value, productDetails.SalesRate));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(386, "\r\n                        ");
            __builder.OpenElement(387, "div");
            __builder.AddAttribute(388, "class", "form-group");
            __builder.AddMarkupContent(389, "<label class=\"col-form-label\" for=\"recipient-name-1\">Discount Amount:</label>\r\n                            ");
            __builder.OpenElement(390, "input");
            __builder.AddAttribute(391, "class", "form-control");
            __builder.AddAttribute(392, "type", "text");
            __builder.AddAttribute(393, "value", global::Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 291 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                               productDetails.DiscountAmount

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(394, "onchange", global::Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => productDetails.DiscountAmount = __value, productDetails.DiscountAmount));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(395, "\r\n                ");
            __builder.OpenElement(396, "div");
            __builder.AddAttribute(397, "class", "modal-footer");
            __builder.OpenElement(398, "button");
            __builder.AddAttribute(399, "class", "btn btn-secondary");
            __builder.AddAttribute(400, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 295 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                                CloseModel

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(401, "type", "button");
            __builder.AddContent(402, "Close");
            __builder.CloseElement();
            __builder.AddMarkupContent(403, "\r\n                    ");
            __builder.OpenElement(404, "button");
            __builder.AddAttribute(405, "class", "btn btn-primary");
            __builder.AddAttribute(406, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 296 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
                                                              () =>AddToCart(productDetails)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(407, "type", "button");
            __builder.AddContent(408, "Save");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 301 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
}
else
{
    
}

#line default
#line hidden
#nullable disable
        }
        #pragma warning restore 1998
#nullable restore
#line 306 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
       
    SalesMaster  master = new SalesMaster();
    InventorySetting setting = new InventorySetting();
    AccountLedger ledger = new AccountLedger();
    InventorySetting settingView = new InventorySetting();
    bool open;
    Anchor anchor;
    ProductView product = new ProductView();
    CartItem productDetails = new CartItem();
    IEnumerable<ProductView> listProduct;
    List<AccountLedgerView> subledger = new List<AccountLedgerView>();
    List<Category> listCategory = new List<Category>();
    List<Tax> listTaxItem;
    //TodoTask
    List<CartItem> cartItems = new List<CartItem>();
    private CartItem cartItem = new CartItem { Qty = 1 };
    bool isShow = false;
    string Title;
    string strSerialNo;
    string strPrefix;
    string strSuffix;
    long decVouchertypeIdSalesInvoice = 19;
    long decVoucherReceiveId = 5;

    public byte[] ImageUploaded { get; set; }
    int counter = 1;
    long CategoryId = 0;
    string ProductName = string.Empty;
    string Barcode = string.Empty;
    protected async override void OnInitialized()
    {
        //CheckPriviliage
        settingView = settingRepository.EditInventorySetting(decVouchertypeIdSalesInvoice);
        strPrefix = settingView.Prefix;
        strSuffix = settingView.Suffix;
        bool collapseNavMenu = false;
        LoadData();
    }
    protected async void LoadData()
    {
        if (settingView.VoucherNoAutomatic == true)
        {
            strSerialNo = salesInvoiceRepository.GetSalesvoucherNo(1, 1, decVouchertypeIdSalesInvoice);
            master.VoucherNo = strPrefix + strSerialNo + strSuffix;
        }
        else
        {
            master.VoucherNo = string.Empty;
            strSerialNo = "0";
        }
        master.Date = DateTime.Now;
        master.NepaliDate = string.Empty;
        master.DueDateNep = string.Empty;
        master.InvoiceNo = string.Empty;
        master.DueDate = DateTime.Now;
        master.NetAmounts = 0;
        master.TotalAmount = 0;
        master.TaxRate = 0;
        master.TotalTax = 0;
        master.DisPer = 0;
        master.BillDiscount = 0;
        master.CashAmount = 0;
        master.BankAmount = 0;
        master.CreditAmount = 0;
        master.GrandTotal = 0;
        master.PreviousDue = 0;
        master.Narration = string.Empty;
        subledger = ledgerRepository.ViewAllCustomer(1); //1 is companyid
        listProduct = productRepository.ViewAllProduct(1);//1 is companyid
        listCategory = category.GetAll();
        CartService.EmptyCart();
        master.SalesManId = 1;
        product.TaxId = 1;
        master.TaxId = 1;
        master.CashId = 1;
        master.BankId = 13;
        StateHasChanged();
    }
    protected async void Save()
    {
        //CheckNegativeStockAndNegativeLedger
        long decProductId = 0;
        long decBatchId = 0;
        decimal decCalcQty = 0;
        string strStatus = setting.NegativestockStatus;
        bool isNegativeLedger = false;
        DataTable dtblPurchaseMasterViewById = new DataTable();
        if (cartItems != null)
        {

            foreach (var list in cartItems)
            {
                decProductId = list.ProductId;
                if (list.BatchId > 0)
                {
                    decBatchId = list.BatchId;
                }
                decimal decCurrentStock = stockPosting.StockCheckForProductSale(decProductId, decBatchId);
                if (list.Qty > 0)
                {
                    decCalcQty = decCurrentStock - list.Qty;
                }
                if (decCalcQty < 0)
                {
                    isNegativeLedger = true;
                    break;
                }
            }
            if (isNegativeLedger)
            {
                if (strStatus == "Warn")
                {
                    bool confirmed = await JsRuntime.InvokeAsync<bool>("confirm", "Negative Stock balance exists,Do you want to Continue?");
                    if (confirmed)
                    {
                        SaveOrEdit();

                    }
                }
                else if (strStatus == "Block")
                {
                    Snackbar.Add("Cannot continue ,due to negative stock balance.", Severity.Info);
                }
                else
                {
                    SaveOrEdit();
                }
            }
            else
            {
                SaveOrEdit();
            }
        }
    }
    protected void SaveOrEdit()
    {
        decimal decGrand = 0;
        decimal decCashBankAmount = 0;
        decimal decDue = 0;
        decGrand = master.GrandTotal;
        decCashBankAmount = master.CashAmount + master.BankAmount;
        decDue = decGrand - decCashBankAmount;
        if (cartItems == null)
        {
            Snackbar.Add("Invalid Entry.", Severity.Info);
        }
        else if (master.LedgerId == 0)
        {
            Snackbar.Add("Choose Customer.", Severity.Info);
        }
        else if (master.VoucherNo == string.Empty)
        {
            Snackbar.Add("Type Voucherno.", Severity.Info);
        }
        else if (master.GrandTotal == 0)
        {
            Snackbar.Add("Invalid Entry.", Severity.Info);
        }
        else
        {
            var strVoucherNo = false;
            strVoucherNo = salesInvoiceRepository.AccountSalesInvoiceNoCheckExistence(1, 1, master.VoucherNo);
            if (strVoucherNo == false)
            {
                SqlConnection sqlcon = new SqlConnection(_conn.DbConn);
                sqlcon.Open();
                SqlTransaction sql = sqlcon.BeginTransaction();
                var para = new DynamicParameters();
                para.Add("@SerialNo", strSerialNo);
                para.Add("@VoucherNo", master.VoucherNo);
                para.Add("@InvoiceNo", master.VoucherNo);
                para.Add("@SuffixPrefixId", 0);
                para.Add("@Date", master.Date);
                para.Add("@NepaliDate", master.NepaliDate);
                para.Add("@LedgerId", master.LedgerId);
                para.Add("@DueDate", master.DueDate);
                para.Add("@DueDateNep", master.DueDateNep);
                para.Add("@CreditPeriod", master.CreditPeriod);
                para.Add("@ExchangeRateId", 1);
                para.Add("@POS", true);
                para.Add("@Narration", master.Narration);
                para.Add("@SalesAccount", 10);
                para.Add("@SalesManId", master.SalesManId);
                para.Add("@CounterId", 1);
                para.Add("@PricinglevelId", 1);
                para.Add("@DeliveryNoteMasterId", 0);
                para.Add("@OrderMasterId", 0);
                para.Add("@QuotationMasterId", 0);
                para.Add("@AdditionalCost", master.AdditionalCost);
                para.Add("@CreditAmount", master.CreditAmount);
                para.Add("@BankAmount", master.BankAmount);
                para.Add("@CashAmount", master.CashAmount);
                para.Add("@NetAmounts", master.NetAmounts);
                para.Add("@TaxId", master.TaxId);
                para.Add("@TaxRate", master.TaxRate);
                para.Add("@TotalTax", master.TotalTax);
                para.Add("@DisPer", master.DisPer);
                para.Add("@BillDiscount", master.BillDiscount);
                para.Add("@CheckDis", master.CheckDis);
                para.Add("@GrandTotal", master.GrandTotal);
                para.Add("@TotalAmount", master.TotalAmount);
                para.Add("@PreviousDue", master.PreviousDue);
                para.Add("@LrNo", master.LrNo);
                para.Add("@TransportationCompany", master.TransportationCompany);
                para.Add("@VoucherTypeId", decVouchertypeIdSalesInvoice);
                para.Add("@UserId", 1);
                para.Add("@FinancialYearId", 1);
                para.Add("@CompanyId", 1);
                para.Add("@CashId", master.CashId);
                para.Add("@BankId", master.BankId);
                para.Add("@BalanceDue", decDue);
                if (decDue == 0)
                {
                    para.Add("@Status", "Paid");
                }
                else if (master.GrandTotal > decDue)
                {
                    para.Add("@Status", "Partial Paid");
                }
                else
                {
                    para.Add("@Status", "Draft");
                }
                para.Add("@AddedDate", DateTime.Now);
                para.Add("@CreatedBy", 1);
                para.Add("@MemIDOUT", dbType: DbType.Int64, direction: ParameterDirection.Output);
                sqlcon.Execute("SalesInvoiceInsert", para, sql, 0, CommandType.StoredProcedure);
                long MemID = para.Get<long>("MemIDOUT");
                if (MemID > 0)
                {

                    foreach (var item in cartItems)
                    {
                        var paraOpening = new DynamicParameters();
                        paraOpening.Add("@SalesMasterId", MemID);
                        paraOpening.Add("@DeliveryNoteDetailsId", 0);
                        paraOpening.Add("@OrderDetailsId", 0);
                        paraOpening.Add("@QuotationDetailsId", 0);
                        paraOpening.Add("@ProductId", item.ProductId);
                        paraOpening.Add("@Qty", item.Qty);
                        paraOpening.Add("@Rate", item.SalesRate);
                        paraOpening.Add("@UnitId", item.UnitId);
                        paraOpening.Add("@UnitConversionId", 1);
                        paraOpening.Add("@Discount", item.Discount);
                        paraOpening.Add("@DiscountAmount", item.DiscountAmount);
                        if (item.TaxId == 0)
                        {
                            paraOpening.Add("@TaxId", 1);
                        }
                        else
                        {
                            paraOpening.Add("@TaxId", item.TaxId);
                        }
                        paraOpening.Add("@BatchId", item.BatchId);
                        paraOpening.Add("@GodownId", 1);
                        paraOpening.Add("@RackId", 1);
                        paraOpening.Add("@TaxAmount", item.TaxAmount);
                        paraOpening.Add("@GrossAmount", 0);
                        paraOpening.Add("@NetAmount", item.NetAmount);
                        paraOpening.Add("@Amount", item.TotalAmount);
                        paraOpening.Add("@SlNo", 0);
                        paraOpening.Add("@JourDId", dbType: DbType.Int64, direction: ParameterDirection.Output);
                        sqlcon.Execute("SalesDetailsInsert", paraOpening, sql, 0, CommandType.StoredProcedure);
                        long longdetailsId = paraOpening.Get<long>("JourDId");
                        //StockPosting
                        var parastock = new DynamicParameters();
                        parastock.Add("@BatchId", item.BatchId);
                        parastock.Add("@Date", master.Date);
                        parastock.Add("@NepaliDate", master.NepaliDate);
                        parastock.Add("@CompanyId", 1);
                        parastock.Add("@FinancialYearId", 1);
                        parastock.Add("@LedgerId", master.LedgerId);
                        parastock.Add("@GodownId", 1);
                        parastock.Add("@InwardQty", 0);
                        parastock.Add("@OutwardQty", item.Qty);
                        parastock.Add("@ProductId", item.ProductId);
                        parastock.Add("@RackId", 1);
                        parastock.Add("@Rate", item.SalesRate);
                        parastock.Add("@UnitId", item.UnitId);
                        parastock.Add("@DetailsId", longdetailsId);
                        parastock.Add("@InvoiceNo", master.InvoiceNo);
                        parastock.Add("@VoucherNo", master.VoucherNo);
                        parastock.Add("@VoucherTypeId", decVouchertypeIdSalesInvoice);
                        parastock.Add("@AgainstInvoiceNo", "NA");
                        parastock.Add("@AgainstVoucherNo", "NA");
                        parastock.Add("@AgainstVoucherTypeId", 0);
                        parastock.Add("@StockCalculate", "Sales");
                        parastock.Add("@AddedDate", DateTime.Now);
                        var valuesStock = sqlcon.Query<long>("StockPostingInsert", parastock, sql, true, 0, commandType: CommandType.StoredProcedure);

                    }
                    //LedgerPosting
                    //Customer
                    var paraSc = new DynamicParameters();
                    paraSc.Add("@Date", master.Date);
                    paraSc.Add("@NepaliDate", master.NepaliDate);
                    paraSc.Add("@LedgerId", master.LedgerId);
                    paraSc.Add("@Debit", master.GrandTotal);
                    paraSc.Add("@Credit", 0);
                    paraSc.Add("@VoucherNo", master.VoucherNo);
                    paraSc.Add("@DetailsId", MemID);
                    paraSc.Add("@YearId", 1);
                    paraSc.Add("@InvoiceNo", string.Empty);
                    paraSc.Add("@VoucherTypeId", decVouchertypeIdSalesInvoice);
                    paraSc.Add("@CompanyId", 1);
                    paraSc.Add("@LongReference", master.Narration);
                    paraSc.Add("@ReferenceN", master.Narration);
                    paraSc.Add("@ChequeNo", string.Empty);
                    paraSc.Add("@ChequeDate", string.Empty);
                    paraSc.Add("@AddedDate", DateTime.Now);
                    var valueSc = sqlcon.Query<long>("LedgerPostingInsert", paraSc, sql, true, 0, commandType: CommandType.StoredProcedure);

                    //SalesAccount
                    decimal decSupplierCustomerAmount = Math.Round(master.NetAmounts - master.BillDiscount, 2);

                    var paraPs = new DynamicParameters();
                    paraPs.Add("@Date", master.Date);
                    paraPs.Add("@NepaliDate", master.NepaliDate);
                    paraPs.Add("@LedgerId", 10);
                    paraPs.Add("@Debit", 0);
                    paraPs.Add("@Credit", decSupplierCustomerAmount);
                    paraPs.Add("@VoucherNo", master.VoucherNo);
                    paraPs.Add("@DetailsId", MemID);
                    paraPs.Add("@YearId", 1);
                    paraPs.Add("@InvoiceNo", string.Empty);
                    paraPs.Add("@VoucherTypeId", decVouchertypeIdSalesInvoice);
                    paraPs.Add("@CompanyId", 1);
                    paraPs.Add("@LongReference", master.Narration);
                    paraPs.Add("@ReferenceN", master.Narration);
                    paraPs.Add("@ChequeNo", string.Empty);
                    paraPs.Add("@ChequeDate", string.Empty);
                    paraPs.Add("@AddedDate", DateTime.Now);
                    var valuePs = sqlcon.Query<long>("LedgerPostingInsert", paraPs, sql, true, 0, commandType: CommandType.StoredProcedure);

                    //Tax
                    if (master.TotalTax > 0)
                    {
                        var paraTax = new DynamicParameters();
                        paraTax.Add("@Date", master.Date);
                        paraTax.Add("@NepaliDate", master.NepaliDate);
                        paraTax.Add("@LedgerId", 14);
                        paraTax.Add("@Debit", 0);
                        paraTax.Add("@Credit", master.TotalTax);
                        paraTax.Add("@VoucherNo", master.VoucherNo);
                        paraTax.Add("@DetailsId", MemID);
                        paraTax.Add("@YearId", 1);
                        paraTax.Add("@InvoiceNo", string.Empty);
                        paraTax.Add("@VoucherTypeId", decVouchertypeIdSalesInvoice);
                        paraTax.Add("@CompanyId", 1);
                        paraTax.Add("@LongReference", master.Narration);
                        paraTax.Add("@ReferenceN", master.Narration);
                        paraTax.Add("@ChequeNo", string.Empty);
                        paraTax.Add("@ChequeDate", string.Empty);
                        paraTax.Add("@AddedDate", DateTime.Now);
                        var valueTax = sqlcon.Query<long>("LedgerPostingInsert", paraTax, sql, true, 0, commandType: CommandType.StoredProcedure);
                    }

                }
                sql.Commit();
                Snackbar.Add("Saved Successfully.", Severity.Info);
                navManager.NavigateTo($"/sales/salesinvoicedetails/{MemID}");
            }
            else
            {
                Snackbar.Add("Voucher No Already Exit.", Severity.Info);
            }
        }
    }
    string convertImageToDisplay(byte[] image)
    {
        if (image != null)
        {
            var base64 = Convert.ToBase64String(image);
            var finalStr = string.Format("data:image/jpg;base64,{0}", base64);
            return finalStr;
        }
        return "";
    }
    protected async void CategoryClicked(long id)
    {
        listProduct = productRepository.ViewCategoryWiseProduct(id);//1 is companyid
        StateHasChanged();
    }
    protected async void ProductClicked(long id)
    {
        var myTodoss = listProduct.FirstOrDefault(x => x.ProductId == id);
        

#line default
#line hidden
#nullable disable
#nullable restore
#line 692 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
         if (myTodoss != null)
        {
            foreach(var item in cartItems)
            {
                if(myTodoss.ProductId == item.ProductId)
                {
                    Snackbar.Add("This product is already added.", Severity.Warning);
                    return;
                }
            }
            cartItem.ProductId = myTodoss.ProductId;
            cartItem.ProductCode = myTodoss.ProductCode;
            cartItem.ProductName = myTodoss.ProductName;
        cartItem.Barcode = myTodoss.Barcode;
        cartItem.UnitId = myTodoss.UnitId;
        cartItem.BatchId = myTodoss.BatchId;
        cartItem.SalesRate = myTodoss.SalesRate;
        cartItem.Mrp = myTodoss.Mrp;
        cartItem.SalesRate = myTodoss.SalesRate;
        cartItem.Discount = myTodoss.Discount;
        cartItem.DiscountAmount = myTodoss.DiscountAmount;
        cartItem.TaxId = myTodoss.TaxId;
        cartItem.TaxRate = myTodoss.TaxRate;
        cartItem.TaxAmount = myTodoss.TaxAmount;
        cartItem.Amount = Math.Round(1 * myTodoss.SalesRate , 2);
        cartItem.TotalAmount = Math.Round(1 * myTodoss.SalesRate , 2);
        cartItem.NetAmount = myTodoss.NetAmount;
        cartItem.UnitName = myTodoss.UnitName;
        cartItem.TaxName = myTodoss.TaxName;
        cartItem.CurrentStock = myTodoss.CurrentStock;
        await CartService.AddToCart(cartItem);
        //Snackbar.Add("Successfully add to cart.", Severity.Info);
        cartItems = await CartService.GetCartItems();
            listProduct = productRepository.ViewAllProduct(1);
            CalculateTotal();
            StateHasChanged();
        }
        else
        {
            
        }

#line default
#line hidden
#nullable disable
#nullable restore
#line 732 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
         
    }
    protected async void OnChange(object value, string name)
    {
        var myTodoss = listProduct.FirstOrDefault(x => x.ProductName == value);
        

#line default
#line hidden
#nullable disable
#nullable restore
#line 737 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
         if (myTodoss != null)
        {
            foreach(var item in cartItems)
            {
                if(myTodoss.ProductId == item.ProductId)
                {
                    Snackbar.Add("This product is already added.", Severity.Warning);
                    return;
                }
            }
            cartItem.ProductId = myTodoss.ProductId;
            cartItem.ProductCode = myTodoss.ProductCode;
            cartItem.ProductName = myTodoss.ProductName;
        cartItem.Barcode = myTodoss.Barcode;
        cartItem.UnitId = myTodoss.UnitId;
        cartItem.BatchId = myTodoss.BatchId;
        cartItem.SalesRate = myTodoss.SalesRate;
        cartItem.Mrp = myTodoss.Mrp;
        cartItem.SalesRate = myTodoss.SalesRate;
        cartItem.Discount = myTodoss.Discount;
        cartItem.DiscountAmount = myTodoss.DiscountAmount;
        cartItem.TaxId = myTodoss.TaxId;
        cartItem.TaxRate = myTodoss.TaxRate;
        cartItem.TaxAmount = myTodoss.TaxAmount;
        cartItem.Amount = Math.Round(1 * myTodoss.SalesRate , 2);
        cartItem.TotalAmount = Math.Round(1 * myTodoss.SalesRate , 2);
        cartItem.NetAmount = myTodoss.NetAmount;
        cartItem.UnitName = myTodoss.UnitName;
        cartItem.TaxName = myTodoss.TaxName;
        cartItem.CurrentStock = myTodoss.CurrentStock;
        await CartService.AddToCart(cartItem);
        //Snackbar.Add("Successfully add to cart.", Severity.Info);
        cartItems = await CartService.GetCartItems();
            listProduct = productRepository.ViewAllProduct(1);
            CalculateTotal();
            StateHasChanged();
        }
        else
        {
            
        }

#line default
#line hidden
#nullable disable
#nullable restore
#line 777 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
         
    }
    private async Task DeleteItem(CartItem item)
    {
        await CartService.DeleteItem(item);
        cartItems = await CartService.GetCartItems();
        CalculateTotal();
        StateHasChanged();
    }
    private async Task AddToCart(CartItem items)
    {

        cartItem.ProductId = items.ProductId;
        cartItem.ProductCode = items.ProductCode;
        cartItem.ProductName = items.ProductName;
        cartItem.Barcode = items.Barcode;
        cartItem.UnitId = items.UnitId;
        cartItem.BatchId = items.BatchId;
        cartItem.SalesRate = items.SalesRate;
        cartItem.Mrp = items.Mrp;
        cartItem.SalesRate = items.SalesRate;
        cartItem.Discount = items.Discount;
        cartItem.DiscountAmount = items.DiscountAmount;
        cartItem.TaxId = items.TaxId;
        cartItem.TaxRate = items.TaxRate;
        cartItem.TaxAmount = items.TaxAmount;
        cartItem.Amount = items.Amount;
        cartItem.TotalAmount = items.TotalAmount;
        cartItem.NetAmount = items.NetAmount;
        cartItem.UnitName = items.UnitName;
        cartItem.TaxName = items.TaxName;
        cartItem.CurrentStock = items.CurrentStock;
        cartItem.CartStatus = "equal";
        await CartService.AddToCart(cartItem);
        //Snackbar.Add("Successfully add to cart.", Severity.Info);
        cartItems = await CartService.GetCartItems();
        isShow = false;
        CalculateTotal();
        StateHasChanged();
    }
    private async Task AddToCartDsc(CartItem items)
    {

        cartItem.ProductId = items.ProductId;
        cartItem.ProductCode = items.ProductCode;
        cartItem.ProductName = items.ProductName;
        cartItem.Barcode = items.Barcode;
        cartItem.UnitId = items.UnitId;
        cartItem.BatchId = items.BatchId;
        cartItem.SalesRate = items.SalesRate;
        cartItem.Mrp = items.Mrp;
        cartItem.SalesRate = items.SalesRate;
        cartItem.Discount = items.Discount;
        cartItem.DiscountAmount = items.DiscountAmount;
        cartItem.TaxId = items.TaxId;
        cartItem.TaxRate = items.TaxRate;
        cartItem.TaxAmount = items.TaxAmount;
        cartItem.Amount = items.Amount;
        cartItem.TotalAmount = items.TotalAmount;
        cartItem.NetAmount = items.NetAmount;
        cartItem.UnitName = items.UnitName;
        cartItem.TaxName = items.TaxName;
        cartItem.CurrentStock = items.CurrentStock;
        cartItem.CartStatus = "Dsc";

        await CartService.AddToCart(cartItem);
        //Snackbar.Add("Successfully add to cart.", Severity.Info);
        cartItems = await CartService.GetCartItems();
        CalculateTotal();
        StateHasChanged();
    }
    private async Task AddToCartAsc(CartItem items)
    {
        if (items.Qty == 1)
        {

        }
        else
        {
            cartItem.ProductId = items.ProductId;
            cartItem.ProductCode = items.ProductCode;
            cartItem.ProductName = items.ProductName;
            cartItem.Barcode = items.Barcode;
            cartItem.UnitId = items.UnitId;
            cartItem.BatchId = items.BatchId;
            cartItem.SalesRate = items.SalesRate;
            cartItem.Mrp = items.Mrp;
            cartItem.SalesRate = items.SalesRate;
            cartItem.Discount = items.Discount;
            cartItem.DiscountAmount = items.DiscountAmount;
            cartItem.TaxId = items.TaxId;
            cartItem.TaxRate = items.TaxRate;
            cartItem.TaxAmount = items.TaxAmount;
            cartItem.Amount = items.Amount;
            cartItem.TotalAmount = items.TotalAmount;
            cartItem.NetAmount = items.NetAmount;
            cartItem.UnitName = items.UnitName;
            cartItem.TaxName = items.TaxName;
            cartItem.CurrentStock = items.CurrentStock;
            cartItem.CartStatus = "Asc";
            await CartService.AddToCart(cartItem);
            //Snackbar.Add("Successfully add to cart.", Severity.Info);
            cartItems = await CartService.GetCartItems();
            CalculateTotal();
            StateHasChanged();
        }
    }
    private void ShowModel(long id)
    {
        isShow = true;
        Title = "Product";
        var myTodoss = cartItems.FirstOrDefault(x => x.ProductId == id);
        

#line default
#line hidden
#nullable disable
#nullable restore
#line 889 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
         if (myTodoss != null)
        {
            productDetails.ProductId = myTodoss.ProductId;
            productDetails.ProductCode = myTodoss.ProductCode;
            productDetails.ProductName = myTodoss.ProductName;
        productDetails.Barcode = myTodoss.Barcode;
        productDetails.UnitId = myTodoss.UnitId;
         productDetails.BatchId = myTodoss.BatchId;
        productDetails.SalesRate = myTodoss.SalesRate;
        productDetails.Mrp = myTodoss.Mrp;
        productDetails.SalesRate = myTodoss.SalesRate;
        productDetails.Discount = myTodoss.Discount;
        productDetails.DiscountAmount = myTodoss.DiscountAmount;
        productDetails.TaxId = myTodoss.TaxId;
        productDetails.TaxRate = myTodoss.TaxRate;
        productDetails.TaxAmount = myTodoss.TaxAmount;
        productDetails.Amount = Math.Round(1 * myTodoss.SalesRate , 2);
        productDetails.TotalAmount = Math.Round(1 * myTodoss.SalesRate , 2);
        productDetails.NetAmount = myTodoss.NetAmount;
        productDetails.UnitName = myTodoss.UnitName;
        productDetails.TaxName = myTodoss.TaxName;
        productDetails.CurrentStock = myTodoss.CurrentStock;
        }
        else
        {
            
        }

#line default
#line hidden
#nullable disable
#nullable restore
#line 915 "E:\Personal Projects\SaikPOS\SaikPOS\Pages\Inventory\PosInvoice\PosInvoice.razor"
         
        StateHasChanged();
    }
    private void CloseModel()
    {
        isShow = false;
        StateHasChanged();
    }
    void CalculateTotal()
    {
        decimal decTotalAmount = 0;
        decimal decAdditionalCost = 0;
        decimal decTaxAmount = 0;
        decimal decTotalDisTax = 0;
        decimal decGrandTotalCshbnk = 0;
        decimal decNetAmount = 0;
        decimal decCheckTax = 0;
        decimal decGrandTotal = 0;
        foreach (var todo in cartItems)
        {
            decTotalAmount = decTotalAmount + todo.TotalAmount;
            decNetAmount = decNetAmount + todo.NetAmount;
            decCheckTax = decCheckTax + todo.TaxAmount;
        }
        master.NetAmounts = Math.Round(decNetAmount, 2);
        master.TotalAmount = Math.Round(decTotalAmount, 2);
        decimal decTotalAmountTax = 0;
        decTotalAmountTax = decTotalAmount + master.TotalTax;
        //if (master.CheckDis == "true")
        //{

            //master.BillDiscount = decTotalAmountTax * master.DisPer / 100;
            //decTotalDisTax = decTotalAmount;
        //}
        //else
        //{
            decTotalDisTax = decTotalAmount;
        if(master.BillDiscount > 0)
        {
            master.DisPer = (master.BillDiscount * 100) / (decTotalAmountTax);
        }
        //}
        if (decCheckTax > 0)
        {
            decTaxAmount = Math.Round(decCheckTax, 2);
            master.TotalTax = Math.Round(decCheckTax, 2);
        }
        else
        {
            decTaxAmount = decTotalDisTax * master.TaxRate / 100;
            master.TotalTax = Math.Round(decTaxAmount, 2);
        }
        decimal decDiscountAmount = 0;
        decDiscountAmount = master.BillDiscount;
        decGrandTotal = Math.Round((decTotalDisTax + decAdditionalCost + decTaxAmount) - (decDiscountAmount), 2);
        if (decGrandTotal >= 0)
        {
            master.GrandTotal = decGrandTotal;
        }
        else
        {
            master.BillDiscount = 0;
            master.GrandTotal = decGrandTotal;
        }
        decGrandTotalCshbnk = master.CashAmount + master.BankAmount;
        if (master.GrandTotal >= decGrandTotalCshbnk)
        {
            var decTotl = master.GrandTotal - decGrandTotalCshbnk;
            master.CreditAmount = Math.Round(decTotl, 2);
        }
        else
        {
            master.CreditAmount = 0;
            master.CashAmount = 0;
            master.BankAmount = 0;
        }
    }
    protected async void LedgerClicked()
    {
        if (master.LedgerId > 0)
        {
            var view = salesInvoiceRepository.CustomerSalesDue(master.LedgerId);
            master.PreviousDue = view.DueBalance;
        }
        else
        {
            master.PreviousDue = 0;
        }
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ISnackbar Snackbar { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager navManager { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime JsRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IAccountLedger ledgerRepository { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IUnit unitRepository { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IArea areaRepository { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ISalesMan salesMan { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ITax taxRepository { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IProduct productRepository { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IStockPosting stockPosting { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ILocalStorageService LocalStorage { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ICategory category { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IInventorySetting settingRepository { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private DatabaseConnection _conn { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ISalesInvoice salesInvoiceRepository { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ICartService CartService { get; set; }
    }
}
#pragma warning restore 1591
